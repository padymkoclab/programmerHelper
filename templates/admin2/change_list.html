{% extends "admin/change_list.html" %}

{% load i18n %}
{% load utils_filters %}
{% load eim_templatetags %}

{% comment %}
Load library of tags for filters of Django-Suit
{% endcomment %}
{% load admin_static admin_list admin_urls suit_list suit_tags %}

{% block object-tools-items %}
    {% if has_add_permission %}

    {% comment %}
        For all registered models, added feature for export and import a data
    {% endcomment %}

    <a href="{% make_url_for_export_data_model %}" class="btn btn-danger">
        <i class="icon-upload icon-white"></i>&nbsp;{% trans "Export" %}
    </a>

    <a href="{% url 'export_import_models:import' %}" class="btn btn-warning">
        <i class="icon-download icon-white"></i>&nbsp;{% trans "Import" %}
    </a>

    {% comment %}
    Display button "Add object" if only that model admin class has url for add object.
    {% endcomment %}
    {% if cl.model_admin|has_admin_url:'add' %}
        <a href="{% url cl.opts|admin_urlname:'add' %}{% if is_popup %}?_popup=1{% endif %}" class="btn btn-success">
            <i class="icon-plus-sign icon-white"></i>&nbsp;
            {% blocktrans with cl.opts.verbose_name as name %}Add {{ name }}{% endblocktrans %}
        </a>
{% endif %}
{% endif %}
{% endblock object-tools-items %}

{% block result_list %}
    {% if cl.result_count %}
        {% if action_form and actions_on_top and cl.full_result_count %}{% admin_actions %}{% endif %}
        {% result_list_with_context cl %}
        {% if action_form and actions_on_bottom and cl.full_result_count %} {% admin_actions %}{% endif %}
    {% else %}
        {% suit_bc_value 1.5 'pop' 1.6 '_popup' as POPUP_VAR %}
        <div class="alert alert-block alert-info">
            {% if cl.full_result_count %}
                <h4>{% trans 'Nothing found' %}!</h4>
                <br>
                <a href="?{% if cl.is_popup %}{{ POPUP_VAR }}=1{% endif %}">{% trans 'Reset search and filters' %}</a>
            {% else %}
                {% comment %}
                Display button "Add object" if only that model admin class has url for add object.
                And replace text in blocktrans
                {% endcomment %}
                {% blocktrans with cl.opts.verbose_name_plural|capfirst as name_plural  trimmed %}
                  {{ name_plural }} are not exists yet
                {% endblocktrans %}.
                {% if cl.model_admin|has_admin_url:'add' %}
                    {% if has_add_permission %}<a href="{% url cl.opts|admin_urlname:'add' %}{% if is_popup %}?{{ POPUP_VAR }}=1{% endif %}">
                    {% blocktrans with cl.opts.verbose_name as name %}Add {{ name }}{% endblocktrans %}</a>{% endif %}
                {% endif %}
    {% endif %}
</div>
{% endif %}
{% endblock %}
